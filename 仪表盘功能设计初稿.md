结论先说：是的，第一步应该做需求设计，而且要把“可视化组件清单、数据绑定能力、无代码编辑交互、权限与刷新策略”这四块明确下来，再进入技术方案与分阶段迭代。

难度评估

- 复杂度中高：涉及布局拖拽缩放、可视化渲染、无代码配置、数据查询与聚合、权限与刷新机制。
- 主要工作量在前端（布局与配置编辑器、图表组件、数据绑定）和后端（查询执行与缓存、权限校验）之间均衡。
- MVP可控：先支持常用图表+简单聚合与过滤；完整版拓展到透视、多数据源、动态联动。
推荐技术方案

- 布局引擎：用 react-grid-layout 或 @refinedev/ 同类库实现拖拽、缩放、断点适配；持久化 x/y/w/h 。
- 图表库： ECharts （覆盖面广、样式强）、或 Recharts （React友好）；数值卡/进度/表格用现有 UI 组件。
- 无代码配置模型：统一 JSON ，通过属性面板编辑 size/颜色/标题/数据源/聚合/过滤/分组 ；保存到后端。
- 数据绑定与查询：
  - 简单 DSL：选择 tableId ， metrics （count/sum/avg/min/max）， dimensions （按列分组/时间粒度）， filters （eq/in/range/text.contains）。
  - 后端提供 POST /api/v1/datasets/execute 执行查询，返回结构化数据。对大表做限流与缓存。
- 权限与分享：沿用项目/表权限；仪表盘支持只读分享链接；编辑权限仅作者/管理员。
- 刷新策略：支持“手动刷新/间隔刷新/数据变动通知刷新”（复用你已有的 notifySpaceChanged 事件或加 WebSocket）。
- 主题与样式：支持浅/深色切换 + 颜色面板；可选自定义调色板。
MVP范围（建议）

- 组件类型：数值卡（KPI）、折线/柱状/饼图、数据表、进度条。
- 布局：拖拽、缩放、保存布局；基础网格与对齐。
- 数据绑定：单表数据源、1个指标+最多2个维度、基本过滤；时间维度按日/周/月分组。
- 配置编辑：标题、颜色、单位、格式；简单交互（点击高亮）。
- 刷新：手动刷新 + 15–60秒轮询。
- 权限：项目内可见，编辑者可改；只读分享链接。
- 不含联动/多数据源/嵌套透视（第二阶段再做）。
接口与数据模型示例

- Dashboard ：
  - id , name , projectId , layout: [{widgetId, x, y, w, h}]
  - widgets: [{ id, type, title, style, query }]
- Widget.query 示例：
  ```
  {
    "source": { "tableId": 
    "tbl_xxx" },
    "metrics": [{ "op": "sum", 
    "field": "amount" }],
    "dimensions": [
      { "field": "date", 
      "granularity": "day" }
    ],
    "filters": [
      { "field": "status", "op": 
      "eq", "value": "done" }
    ],
    "sort": [{ "by": "date", 
    "order": "asc" }],
    "limit": 1000
  }
  ```
- API 草案：
  - POST /api/v1/dashboards 创建
  - GET /api/v1/dashboards/:id 获取
  - PUT /api/v1/dashboards/:id 更新
  - POST /api/v1/datasets/execute 执行查询（请求体为上面的 query ）
  风险与难点

- 查询与聚合能力边界：DSL要简洁但足够用；避免一开始做“通用SQL”导致不可控。
- 大数据性能：需要服务端分页/聚合、缓存（5–30秒）、采样策略。
- 可视化一致性：颜色、刻度、格式化与主题统一。
- 编辑体验：拖拽/缩放与属性编辑器的交互流畅与易用性。
- 权限与分享：与现有项目/表权限一致，注意共享链接的安全隔离。
建议的第一步（需求设计交付物）

- 产出 PRD/需求文档 ：明确用户角色与使用场景、组件清单、配置项列表、数据绑定能力（支持哪些聚合/分组/过滤）、刷新策略、权限与分享。
- 低保真原型/线框：仪表盘首页、编辑模式、属性面板、数据源选择与预览、保存与分享流。
- MVP边界与不做列表：例如暂不支持多数据源、跨表关联、图表联动。
- 技术约束与性能目标：最大记录数、响应时间目标、缓存策略。
- 埋点与指标：仪表盘使用量、查询次数、渲染耗时。
分阶段路线图（参考）

- 第0周：需求设计与原型（上述交付物），接口草案与数据模型评审。
- 第1–2周（MVP开发）：
  - 前端：布局引擎接入、组件库（KPI/折线/柱状/饼/表格）、属性面板、数据绑定表单。
  - 后端： /datasets/execute 简单聚合与过滤、权限校验、缓存。
  - 联调：保存/加载仪表盘、布局持久化。
- 第3–4周（增强）：
  - 刷新策略完善（轮询+事件刷新）、分享链接、主题与样式的完善、E2E 测试。
  - 性能优化与错误体验（空数据/不合法配置的提示）。
- 第5周+（高级特性）：
  - 透视表、联动交互（点击某图过滤其他图）、多数据源、表达式/计算列、导出功能。